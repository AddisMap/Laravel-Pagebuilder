!function(t){var e={};function n(o){if(e[o])return e[o].exports;var a=e[o]={i:o,l:!1,exports:{}};return t[o].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:o})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=6)}([,,,,,,function(t,e,n){t.exports=n(7)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(8),a=(n.n(o),n(9)),i=(n.n(a),n(10)),r=(n.n(i),n(11)),s=(n.n(r),n(12));n.n(s)},function(t,e){$(document).ready(function(){$(".gjs-editor").append($("#toggle-sidebar")),$(".gjs-pn-panels").prepend($("#sidebar-header")),$(".gjs-pn-panels").append($("#sidebar-bottom-buttons")),$("#toggle-sidebar").click(function(){$("#gjs").toggleClass("sidebar-collapsed")}),window.editor.on("run:open-sm",function(t){$("#gjs-sm-advanced .gjs-sm-properties").append($(".gjs-clm-tags"))}),window.editor.on("block:drag:start",function(t){$(window).width()<1e3&&$("#gjs").addClass("sidebar-collapsed")})}),window.addEventListener("message",function(t){"page-loaded"===t.data?setTimeout(function(){$("#phpb-loading").addClass("loaded"),window.isLoaded=!0},500):"touch-start"===t.data&&window.touchStart()},!1)},function(t,e){$(document).ready(function(){function t(){o();var t=e(window.editor.getWrapper().find("[phpb-content-container]")[0]);$.ajax({type:"POST",url:$("#save-page").data("url"),data:{data:JSON.stringify(t)},success:function(){o(),window.toastr.success(window.translations["toastr-changes-saved"])},error:function(){o(),window.toastr.error(window.translations["toastr-saving-failed"])}})}function e(t){var e=function t(e){var o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];var i={};i.current_block={};i.blocks={};var r=o;var s=a;void 0!==e.attributes["block-id"]&&("false"===e.attributes["is-html"]?(r=!0,s=!1):o&&"true"===e.attributes["is-html"]&&(s=!0));e.get("components").forEach(function(e){var n=t(e,r,s);for(var o in n.current_block)i.current_block[o]=n.current_block[o];for(var a in n.blocks)i.blocks[a]=n.blocks[a]});if(void 0!==e.attributes["block-id"])if(o&&"true"===e.attributes["is-html"]&&!1===a)i.current_block[e.attributes["block-id"]]=window.html_beautify(e.toHTML());else if("false"===e.attributes["is-html"]){var l={};e.get("traits").each(function(t){l[t.get("name")]=t.getTargetValue()}),i.current_block.attributes=l;var c="ID"+(Date.now().toString(36)+Math.random().toString(36).substr(2,5)+n++).toUpperCase();e.replaceWith({tagName:"phpb-block",attributes:{slug:e.attributes["block-slug"],id:c}}),i.blocks[c]=i.current_block,i.current_block={}}return i}(t=window.cloneComponent(t)).blocks,o=window.html_beautify(function(t){var e="";t.get("components").forEach(function(t){return e+=t.toHTML()});var n=$("<container>"+e+"</container>");return n.find("phpb-block").each(function(){$(this).replaceWith('[block slug="'+$(this).attr("slug")+'" id="'+$(this).attr("id")+'"]')}),n.html()}(t)),a=window.editor.getCss(),i=window.editor.getStyle(),r=[];return t.get("components").forEach(function(t){return r.push(t.toJSON())}),{html:o,css:a,components:r,blocks:e,style:i}}$("#save-page").click(function(){t()}),$(document).bind("keydown",function(e){if(e.ctrlKey&&83===e.which)return t(),e.preventDefault(),!1}),window.getComponentDataInStorageFormat=function(t){var n=window.cloneComponent(t.parent());return n.get("components").reset(),n.append(t),e(n)};var n=0;function o(){var t=$("#save-page");t.blur(),t.hasClass("waiting")?(t.attr("disabled",!1),t.removeClass("waiting"),t.find(".spinner-border").addClass("d-none")):(t.attr("disabled",!0),t.addClass("waiting"),t.find(".spinner-border").removeClass("d-none"))}})},function(t,e){!function(){function t(e){var n=e;if("phpb-block"===e.get("tagName")){var o=e.attributes.attributes.id;void 0!==window.dynamicBlocks[o]&&void 0!==window.dynamicBlocks[o].html&&(n=e.replaceWith(window.dynamicBlocks[o].html))}n.get("components").each(function(e){return t(e)})}function e(t){if("phpb-block"===t.attributes.tagName){var o=t.parent(),a=cloneComponent(t),i=void 0;o.components().each(function(e){e.cid===t.cid&&(1===t.components().length?(i=cloneComponent(t.components().models[0]),t.replaceWith(i)):(i=t.replaceWith({tagName:"div"}),a.components().each(function(t){i.append(cloneComponent(t))})))}),t.remove(),n(a,i,!0,!1),e(i),function(t){if(void 0===window.blockSettings[t.attributes["block-slug"]])return;var e=[],n=t.attributes["block-id"];void 0!==window.dynamicBlocks[n]&&void 0!==window.dynamicBlocks[n].settings.attributes&&(e=window.dynamicBlocks[n].settings.attributes);t.attributes["is-updating"]=!0,window.blockSettings[t.attributes["block-slug"]].forEach(function(n){var o=t.addTrait(n);void 0!==e[n.name]?o.setTargetValue(e[n.name]):void 0!==n["default-value"]&&o.setTargetValue(n["default-value"])}),t.attributes["is-updating"]=!1}(i)}else t.components().each(function(t){e(t)})}function n(t,e,n,o){var a=t.attributes.attributes;for(var i in a)a.hasOwnProperty(i)&&(o&&(e.attributes.attributes[i]=a[i]),n&&(e.attributes[i]=a[i]))}function o(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(r(t),void 0!==t.attributes.attributes["phpb-content-container"])t.set({droppable:!0,hoverable:!0});else if(void 0!==t.attributes["block-slug"]){var s={removable:!0,draggable:!0,copyable:!0,selectable:!0,hoverable:!0,stylable:!0};i(t),"false"===t.attributes["is-html"]?e=!0:(e&&(s.removable=!1,s.copyable=!1,s.draggable=!1,e=!1),n=!0),t.set(s)}n&&function(t){var e=t.get("tagName");["h1","h2","h3","h4","h5","h6","h7","p","a","img","button","small","b","strong","i","em","ul","li","th","td"].includes(e)&&a(t)}(t),function(t){("phpb-editable"in t.attributes.attributes||"phpb-block-container"in t.attributes.attributes)&&a(t)}(t),t.get("components").each(function(t){return o(t,e,n)})}function a(t){var e={hoverable:!0,selectable:!0,editable:!0,stylable:!0};"phpb-block-container"in t.attributes.attributes&&(e.droppable=!0),t.set(e),i(t)}function i(t){void 0===t.attributes["style-identifier"]&&(t.attributes["style-identifier"]="ID"+(Date.now().toString(36)+Math.random().toString(36).substr(2,5)+s++).toUpperCase()),t.addClass(t.attributes["style-identifier"])}function r(t){t.set({removable:!1,draggable:!1,droppable:!1,badgable:!1,stylable:!1,highlightable:!1,copyable:!1,resizable:!1,editable:!1,layerable:!1,selectable:!1,hoverable:!1})}window.editor.on("load",function(n){!function t(e){if("phpb-content-container"in e.attributes.attributes)return;r(e);e.get("components").each(function(e){return t(e)})}(n.getWrapper());var a=n.getWrapper().find("[phpb-content-container]")[0];a.set("custom-name",window.translations["page-content"]),a.components(window.pageComponents),t(a),e(a),o(a)}),window.editor.on("component:selected",function(t){document.querySelector(".gjs-toolbar").classList.add("d-none"),(t.attributes.draggable||t.attributes.removable||"phpb-block-container"in t.attributes.attributes)&&document.querySelector(".gjs-toolbar").classList.remove("d-none")}),window.editor.on("block:drag:stop",function(t){if(t){var n=t.parent();e(t),o(n)}}),window.editor.on("component:update",function(n){if(!0===window.isLoaded&&!n.attributes["is-updating"]&&void 0!==n.changed.attributes&&0!==$(".gjs-frame").contents().find("#"+n.ccid).length){n.attributes["is-updating"]=!0,$(".gjs-frame").contents().find("#"+n.ccid).addClass("gjs-freezed");var a=window.editor.getWrapper().find("#"+n.ccid)[0].parent(),i=window.getComponentDataInStorageFormat(n);$.ajax({type:"POST",url:window.renderBlockUrl,data:{data:JSON.stringify(i)},success:function(r){var s=$(r).attr("block-id");void 0===window.dynamicBlocks[s]&&(window.dynamicBlocks[s]={settings:{}});var l={};void 0!==i.blocks[s]&&(l=i.blocks[s].attributes),window.dynamicBlocks[s].settings.attributes=l,n.replaceWith(r),t(a),e(a),o(a);var c=void 0;a.components().each(function(t){t.attributes["block-id"]===s&&(c=t)}),window.editor.select(c)},error:function(){$(".gjs-frame").contents().find("#"+n.ccid).removeClass("gjs-freezed"),n.attributes["is-updating"]=!1}})}}),window.cloneComponent=function(t){var e=t.clone();return function t(e,o){n(e,o,!1,!0);for(var a=0;a<e.components().length;a++){var i=e.components().models[a],r=o.components().models[a];t(i,r)}}(t,e),e};var s=0}()},function(t,e){$(document).ready(function(){window.CKEDITOR.on("dialogDefinition",function(t){var e=t.data.name,n=t.data.definition;if("link"===e){var o=n.getContents("info");n.onLoad=function(){var t=CKEDITOR.dialog.getCurrent();t.getContentElement("info","linkType").getElement().hide(),t.getContentElement("info","protocol").getElement().hide(),t.getContentElement("info","url").getElement().hide()},o.add({type:"select",id:"linktype-selector",label:"Linktype",default:"",items:[[window.translations.page,"page"],["URL","url"]],onChange:function(t){var e=CKEDITOR.dialog.getCurrent();"page"===t.data.value?(e.getContentElement("info","page-selector").getElement().show(),e.getContentElement("info","url-field").getElement().hide()):(e.getContentElement("info","page-selector").getElement().hide(),e.getContentElement("info","url-field").getElement().show(),e.getContentElement("info","url-field").setValue(""))},setup:function(t){void 0===t.type?this.setValue("page"):"url"===t.type&&t.url.url.startsWith("[page id=")?this.setValue("page"):this.setValue(t.type)}}),o.add({type:"select",id:"page-selector",label:window.translations.page,default:"",items:window.pages,onChange:function(){var t=CKEDITOR.dialog.getCurrent(),e="[page id="+this.getValue()+"]";t.setValueOf("info","url",e),t.setValueOf("info","protocol","")},setup:function(t){this.allowOnChange=!1;var e="";t.url&&(e=t.url.url.substr(9,t.url.url.length-10)),this.setValue(e),this.allowOnChange=!0}}),o.add({type:"text",id:"url-field",label:"URL",default:"",onChange:function(){var t=CKEDITOR.dialog.getCurrent(),e=this.getValue();t.setValueOf("info","url",e)},setup:function(t){this.allowOnChange=!1;var e="";t.url&&(e=t.url.url),this.setValue(e),this.allowOnChange=!0}})}})})},function(t,e){$(document).ready(function(){window.touchStart=function(){$("#gjs").addClass("sidebar-collapsed")}})}]);