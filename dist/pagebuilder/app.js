!function(e){var t={};function n(o){if(t[o])return t[o].exports;var a=t[o]={i:o,l:!1,exports:{}};return e[o].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:o})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){n(1),n(6),n(7),n(8),e.exports=n(9)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),a=(n.n(o),n(3)),i=(n.n(a),n(4)),r=(n.n(i),n(5));n.n(r)},function(e,t){$(document).ready(function(){$(".gjs-editor").append($("#toggle-sidebar")),$(".gjs-pn-panels").prepend($("#sidebar-header")),$(".gjs-pn-panels").append($("#sidebar-bottom-buttons")),$("#toggle-sidebar").click(function(){$("#gjs").toggleClass("sidebar-collapsed")}),window.editor.on("run:open-sm",function(e){$("#gjs-sm-advanced .gjs-sm-properties").append($(".gjs-clm-tags"))}),window.editor.on("block:drag:start",function(e){$(window).width()<1e3&&$("#gjs").addClass("sidebar-collapsed")})}),window.addEventListener("message",function(e){"page-loaded"===e.data&&setTimeout(function(){$("#phpb-loading").addClass("loaded")},500)},!1)},function(e,t){$(document).ready(function(){function e(){var e=window.editor;n();var o=e.getWrapper().find("[phpb-content-container]")[0].clone(),a=function e(n){var o=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];var i={};i.current_block={};i.blocks={};var r=o;var l=a;void 0!==n.attributes["block-id"]&&("false"===n.attributes["is-html"]?(r=!0,l=!1):o&&"true"===n.attributes["is-html"]&&(l=!0));n.get("components").forEach(function(t){var n=e(t,r,l);for(var o in n.current_block)i.current_block[o]=n.current_block[o];for(var a in n.blocks)i.blocks[a]=n.blocks[a]});if(void 0!==n.attributes["block-id"])if(o&&"true"===n.attributes["is-html"]&&!1===a)i.current_block[n.attributes["block-id"]]=n.toHTML();else if("false"===n.attributes["is-html"]){var s="ID"+(Date.now().toString(36)+Math.random().toString(36).substr(2,5)+t++).toUpperCase();n.replaceWith({tagName:"phpb-block",attributes:{slug:n.attributes["block-slug"],id:s}}),i.blocks[s]=i.current_block,i.current_block={}}return i}(o).blocks,i=function(e){var t="";e.get("components").forEach(function(e){return t+=e.toHTML()});var n=$("<container>"+t+"</container>");return n.find("phpb-block").each(function(){$(this).replaceWith('[block slug="'+$(this).attr("slug")+'" id="'+$(this).attr("id")+'"]')}),n.html()}(o),r=e.getCss(),l=e.getStyle(),s=[];o.get("components").forEach(function(e){return s.push(e.toJSON())}),$.ajax({type:"POST",url:$("#save-page").data("url"),data:{data:{html:i,css:r,components:JSON.stringify(s),blocks:JSON.stringify(a),style:JSON.stringify(l)}},success:function(){n(),window.toastr.success(window.translations["toastr-changes-saved"])},error:function(){n(),window.toastr.error(window.translations["toastr-saving-failed"])}})}$("#save-page").click(function(){e()}),$(document).bind("keydown",function(t){if(t.ctrlKey&&83===t.which)return e(),t.preventDefault(),!1});var t=0;function n(){var e=$("#save-page");e.blur(),e.hasClass("waiting")?(e.attr("disabled",!1),e.removeClass("waiting"),e.find(".spinner-border").addClass("d-none")):(e.attr("disabled",!0),e.addClass("waiting"),e.find(".spinner-border").removeClass("d-none"))}})},function(e,t){!function(){function e(t){if("phpb-block"===t.attributes.tagName){var n=t.parent(),o=t.clone(),a=void 0;n.components().each(function(e){e.cid===t.cid&&(1===t.components().length?(a=t.components().models[0].clone(),t.replaceWith(a)):(a=t.replaceWith({tagName:"div"}),o.components().each(function(e){a.append(e.clone())})))}),t.remove(),function(e,t){var n=e.attributes.attributes;for(var o in n)n.hasOwnProperty(o)&&(t.attributes[o]=n[o])}(o,a),e(a)}else t.components().each(function(t){e(t)})}function t(e){var o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(n(e),void 0!==e.attributes.attributes["phpb-content-container"])e.set({droppable:!0,hoverable:!0});else if(void 0!==e.attributes["block-slug"]){var i={removable:!0,draggable:!0,copyable:!0,selectable:!0,hoverable:!0,stylable:!0};"false"===e.attributes["is-html"]?o=!0:(o&&(i.removable=!1,i.copyable=!1,i.draggable=!1,o=!1),a=!0),e.set(i)}a&&function(e){var t=e.get("tagName");["h1","h2","h3","h4","h5","h6","h7","p","a","img","button","small","b","strong","i","em","ul","li","th","td"].includes(t)&&e.set({hoverable:!0,selectable:!0,editable:!0,stylable:!0})}(e),function(e){"phpb-editable"in e.attributes.attributes&&e.set({hoverable:!0,selectable:!0,editable:!0,stylable:!0})}(e),e.get("components").each(function(e){return t(e,o,a)})}function n(e){e.set({removable:!1,draggable:!1,droppable:!1,badgable:!1,stylable:!1,highlightable:!1,copyable:!1,resizable:!1,editable:!1,layerable:!1,selectable:!1,hoverable:!1})}window.editor.on("load",function(o){!function e(t){if("phpb-content-container"in t.attributes.attributes)return;n(t);t.get("components").each(function(t){return e(t)})}(o.getWrapper());var a=o.getWrapper().find("[phpb-content-container]")[0];a.set("custom-name",window.translations["page-content"]),a.components(window.pageComponents),function e(t){var n=t;if("phpb-block"===t.get("tagName")){var o=t.attributes.attributes.id;void 0!==window.dynamicBlocks[o]&&(n=t.replaceWith(window.dynamicBlocks[o]))}n.get("components").each(function(t){return e(t)})}(a),e(a),t(a)}),window.editor.on("component:selected",function(e){document.querySelector(".gjs-toolbar").classList.add("d-none"),(e.attributes.draggable||e.attributes.removable)&&document.querySelector(".gjs-toolbar").classList.remove("d-none")}),window.editor.on("block:drag:stop",function(n){if(n){var o=n.parent();e(n),t(o)}})}()},function(e,t){$(document).ready(function(){window.CKEDITOR.on("dialogDefinition",function(e){var t=e.data.name,n=e.data.definition;if("link"===t){var o=n.getContents("info");n.onLoad=function(){$("[id*='cke_dialog_contents_']").first();var e=CKEDITOR.dialog.getCurrent();e.getContentElement("info","linkType").getElement().hide(),e.getContentElement("info","protocol").getElement().hide(),e.getContentElement("info","url").getElement().hide()},o.add({type:"select",id:"linktype-selector",label:"Linktype",default:"",items:[[window.translations.page,"page"],["URL","url"]],onChange:function(e){var t=CKEDITOR.dialog.getCurrent();"page"===e.data.value?(t.getContentElement("info","page-selector").getElement().show(),t.getContentElement("info","url-field").getElement().hide()):(t.getContentElement("info","page-selector").getElement().hide(),t.getContentElement("info","url-field").getElement().show(),t.getContentElement("info","url-field").setValue(""))},setup:function(e){void 0===e.type?this.setValue("page"):"url"===e.type&&e.url.url.startsWith("[page id=")?this.setValue("page"):this.setValue(e.type)}}),o.add({type:"select",id:"page-selector",label:window.translations.page,default:"",items:window.pages,onChange:function(){var e=CKEDITOR.dialog.getCurrent(),t="[page id="+this.getValue()+"]";e.setValueOf("info","url",t),e.setValueOf("info","protocol","")},setup:function(e){this.allowOnChange=!1;var t="";e.url&&(t=e.url.url.substr(9,e.url.url.length-10)),this.setValue(t),this.allowOnChange=!0}}),o.add({type:"text",id:"url-field",label:"URL",default:"",onChange:function(){var e=CKEDITOR.dialog.getCurrent(),t=this.getValue();e.setValueOf("info","url",t)},setup:function(e){this.allowOnChange=!1;var t="";e.url&&(t=e.url.url),this.setValue(t),this.allowOnChange=!0}})}})})},function(e,t){},function(e,t){},function(e,t){},function(e,t){}]);